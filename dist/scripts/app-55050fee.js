"use strict";angular.module("backing",["ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","firebase"]).config(["$stateProvider","$urlRouterProvider",function(a,t){a.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}),t.otherwise("/")}]).constant("FBURL","https://backing.firebaseio.com/"),angular.module("backing").factory("StreamService",["$http","$q",function(a,t){var e=stream.connect("kp94f2dwack7",null,"2366");console.log("stream client",e);var n,o;return{add:function(a){console.log("adding activity");var t={actor:"User:2",verb:"says",object:a,target:"Board:1"};o.addActivity(t,function(){console.log("activity added")})},getUser:function(){var i=t.defer();return console.log("getting user"),a.get("http://localhost:8080/api/stream").success(function(a){n=a.token,o=e.feed("user","1",n),i.resolve(o)}),i.promise}}}]),angular.module("backing").controller("MainCtrl",["$scope","Auth","FBURL","$firebaseAuth","StreamService","$http",function(a,t,e,n,o,i){var r=new Firebase(e),l=n(r);t.$onAuth(function(t){console.log(t),a.authData=t,i.get("http://graph.facebook.com/v2.2/me/links").success(function(a){console.log(a)})}),a.loginWithFacebook=function(){l.$authWithOAuthPopup("facebook",{scope:"read_stream"})},a.stream=[{first:"here"}],a.addToStream=function(a){o.add(a)},o.getUser().then(function(t){t.subscribe(function(t){console.log("data",t.new),angular.forEach(t.new,function(t){console.log(t),a.stream.push(t)}),console.log(a.stream),a.$apply()})})}]),angular.module("backing").factory("Auth",["FBURL","$firebaseAuth",function(a,t){var e=new Firebase(a);return t(e)}]),angular.module("backing").controller("NavbarCtrl",["$scope",function(a){a.date=new Date}]),angular.module("backing").run(["$templateCache",function(a){a.put("app/main/main.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="jumbotron text-center"><h1>\'Allo, \'Allo!</h1><p class="lead"><img src="assets/images/yeoman.png" alt="I\'m Yeoman"><br>Always a pleasure scaffolding your apps.</p><p><a class="btn btn-lg btn-success" ng-href="#">Splendid!</a></p></div><div class="row"><div ng-show="authData"><p>Hello, {{ authData.facebook.displayName }}</p><button ng-click="auth.$unauth()">Logout</button></div><div ng-hide="authData"><p>Welcome, please log in.</p><button ng-click="loginWithFacebook()">Login</button></div></div><div class="row"><input type="text" ng-model="content"> <button class="btn btn-default" ng-click="addToStream(content)">Add to Stream</button><ul><li ng-repeat="item in stream"><pre>{{item}}</pre></li></ul></div><hr><div class="footer"><p>With â™¥ from <a href="https://twitter.com/Swiip">@Swiip</a></p></div></div>'),a.put("components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" ng-controller="NavbarCtrl"><div class="container-fluid"><div class="navbar-header"><a class="navbar-brand" href="https://github.com/Swiip/generator-gulp-angular"><span class="glyphicon glyphicon-home"></span> Gulp Angular</a></div><div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"><ul class="nav navbar-nav"><li class="active"><a ng-href="#">Home</a></li><li><a ng-href="#">About</a></li><li><a ng-href="#">Contact</a></li></ul><ul class="nav navbar-nav navbar-right"><li>Current date: {{ date | date:\'yyyy-MM-dd\' }}</li></ul></div></div></nav>')}]);